(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[149],{414:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(5155),l=a(2115),i=a(9311),n=a.n(i),r=a(1540),o=a(4550),c=a.n(o);let d=function(){let[e,s]=(0,l.useState)([]),[a,i]=(0,l.useState)([]),[o,d]=(0,l.useState)(0),[m,g]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!1),v=(0,l.useCallback)(e=>{if(!e.target.files.length)return;let a=Array.from(e.target.files);s(e=>[...e,...a]),e.target.value=""},[]),u=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(2)," KB"):"".concat((e/1048576).toFixed(2)," MB"),f=(0,l.useCallback)(e=>new Promise((s,a)=>{let t=new Image,l=URL.createObjectURL(e);t.src=l,t.onload=()=>{let e=document.createElement("canvas");e.width=t.width,e.height=t.height;let a=e.getContext("2d");a.drawImage(t,0,0);let i=a.getImageData(0,0,e.width,e.height);s(new Blob([c().encode([i.data.buffer],e.width,e.height,256)],{type:"image/png"})),URL.revokeObjectURL(l)},t.onerror=e=>{a(Error("Error loading image.")),URL.revokeObjectURL(l)}}),[]),b=(0,l.useCallback)(e=>e.replace(/\.[^/.]+$/,"")+"_converted.png",[]),j=(0,l.useCallback)(async()=>{if(0===a.length){alert("No processed files to download.");return}if(1===a.length){let e=a[0];console.log("Downloading:",e.name),(0,r.saveAs)(new Blob([e.blob],{type:"image/png"}),b(e.name))}else{let e=new(n());for(let s of a)e.file(b(s.name),s.blob,{binary:!0});let s=await e.generateAsync({type:"blob"});console.log("Downloading ZIP:",s),(0,r.saveAs)(s,"snapimg-converted-images.zip")}s([]),i([]),d(0)},[a,b]),x=(0,l.useCallback)(async()=>{if(!e||0===e.length){alert("No files selected. Please upload images first.");return}g(!0),d(0);let s=["image/png","image/webp","image/gif","image/jpeg"],a=e.length,t=0,l=[];for(let i of e){if(!s.includes(i.type)){alert("Unsupported file type: ".concat(i.name,". Only PNG, WEBP, GIF, and JPEG allowed."));continue}try{if("image/png"===i.type)l.push({blob:i,name:i.name});else{let e=await f(i);l.push({blob:e,name:i.name})}}catch(e){console.error("Error processing file ".concat(i.name,":"),e)}d(Math.floor(++t/a*100))}i(l),g(!1),p(l.length>0),l.length>0||alert("No valid images were processed.")},[e,f]),N=(0,l.useCallback)(e=>{s(s=>s.filter((s,a)=>a!==e))},[]);return(0,l.useEffect)(()=>()=>{e.forEach(e=>URL.revokeObjectURL(e))},[e]),(0,l.useEffect)(()=>{let e=document.getElementById("drop-zone"),a=s=>{s.preventDefault(),e.classList.add("drag-over")},t=()=>{e.classList.remove("drag-over")},l=a=>{a.preventDefault(),e.classList.remove("drag-over");let t=Array.from(a.dataTransfer.files);s(e=>[...e,...t])};return e.addEventListener("dragover",a),e.addEventListener("dragleave",t),e.addEventListener("drop",l),()=>{e.removeEventListener("dragover",a),e.removeEventListener("dragleave",t),e.removeEventListener("drop",l)}},[]),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"tool-container",children:[(0,t.jsxs)("div",{className:"tool-header",children:[(0,t.jsx)("h1",{children:"Convert to PNG"})," ",(0,t.jsx)("p",{className:"heading-desc",children:"Drag and drop your images below to convert them to PNG format "})]}),(0,t.jsxs)("div",{className:"main-container-div",id:"drop-zone",children:[(0,t.jsxs)("div",{className:"middle-container",children:[(0,t.jsxs)("div",{className:"upload-section",children:[(0,t.jsx)("input",{type:"file",id:"file-input",multiple:!0,onChange:v,hidden:!0}),(0,t.jsxs)("div",{className:"upload-content",onClick:()=>document.getElementById("file-input").click(),children:[(0,t.jsx)("img",{src:"/img/upload.svg",alt:"Upload",className:"upload-icon"}),(0,t.jsx)("h3",{children:"Drag & Drop Images"}),(0,t.jsx)("p",{children:"or click to browse files"}),(0,t.jsx)("p",{className:"support-text",children:"Supports: PNG, WEBP, GIF, JPEG"})," "]})]}),e.length>0&&(0,t.jsxs)("div",{className:"image-preview-main",children:[(0,t.jsxs)("div",{className:"image-preview-sub",children:[(0,t.jsx)("h3",{children:"Uploaded Images"}),(0,t.jsxs)("div",{className:"file-counter",children:[e.length," files uploaded | ",u(e.reduce((e,s)=>e+s.size,0))]})]}),(0,t.jsx)("div",{className:"image-preview-grid",children:e.map((e,s)=>(0,t.jsxs)("div",{className:"preview-item",children:[(0,t.jsx)("span",{className:"filesize-img",children:u(e.size)}),(0,t.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"preview-image"}),(0,t.jsx)("button",{className:"delete-btn",onClick:()=>N(s),children:(0,t.jsx)("img",{src:"/img/delete.svg",alt:"Delete"})})]},s))})]})]}),(0,t.jsxs)("div",{className:"right-options-container",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"right-options-heading",children:"Progress"}),(0,t.jsxs)("div",{className:"progress-container",children:[(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:"progress",style:{width:"".concat(o,"%")}})}),(0,t.jsxs)("div",{className:"progress-text",id:"progress-text",children:[o,"% Completed"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"right-options-heading",children:"Actions"}),(0,t.jsxs)("div",{className:"action-bar",children:[h?(0,t.jsx)("button",{className:"btn-4",onClick:j,children:"Download"}):(0,t.jsx)("button",{className:"btn-4",onClick:x,disabled:m||0===e.length,children:m?"Processing...":"Convert to PNG"}),h&&(0,t.jsx)("button",{className:"btn-2",onClick:()=>{s([]),i([]),d(0),p(!1)},children:"Reset"})]})]})]})]})]})})}},4317:(e,s,a)=>{Promise.resolve().then(a.bind(a,414))}},e=>{var s=s=>e(e.s=s);e.O(0,[158,550,441,684,358],()=>s(4317)),_N_E=e.O()}]);