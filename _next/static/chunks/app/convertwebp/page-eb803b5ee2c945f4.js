(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{785:(e,s,a)=>{"use strict";a.d(s,{default:()=>c});var t=a(5155),r=a(2115),l=a(9311),i=a.n(l),n=a(1540);let c=()=>{let[e,s]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[c,o]=(0,r.useState)(0),[d,m]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),v=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(2)," KB"):"".concat((e/1048576).toFixed(2)," MB"),p=(0,r.useCallback)(e=>new Promise((s,a)=>{let t=new Image,r=URL.createObjectURL(e);t.src=r,t.onload=()=>{let e=document.createElement("canvas");e.width=t.width,e.height=t.height;let l=e.getContext("2d");if(!l){URL.revokeObjectURL(r),a(Error("Could not get canvas context"));return}l.drawImage(t,0,0),e.toBlob(e=>{URL.revokeObjectURL(r),e?s(e):a(Error("Conversion failed"))},"image/webp",.8)},t.onerror=()=>{URL.revokeObjectURL(r),a(Error("Image loading failed"))}}),[]),u=(0,r.useCallback)(e=>{let a=e.target.files;a&&0!==a.length&&(s(e=>[...e,...Array.from(a)]),e.target.value="")},[]),b=(0,r.useCallback)(e=>{s(s=>s.filter((s,a)=>a!==e))},[]),j=(0,r.useCallback)(async()=>{if(!e.length){alert("Please upload images first");return}m(!0),o(0);let s=["image/png","image/webp","image/gif","image/jpeg"],a=[];for(let t=0;t<e.length;t++){let r=e[t];if(!s.includes(r.type)){alert("Skipping unsupported file: ".concat(r.name));continue}try{let e="image/webp"===r.type?r:await p(r);a.push({blob:e,name:r.name})}catch(e){console.error("Error processing ".concat(r.name,":"),e)}o(Math.floor((t+1)/e.length*100))}l(a),m(!1),h(a.length>0)},[e,p]),x=(0,r.useCallback)(e=>e.replace(/\.[^/.]+$/,"")+"_converted.webp",[]),f=(0,r.useCallback)(async()=>{if(a.length){if(1===a.length){let e=a[0];(0,n.saveAs)(e.blob,x(e.name))}else{let e=new(i());a.forEach(s=>{e.file(x(s.name),s.blob)});let s=await e.generateAsync({type:"blob"});(0,n.saveAs)(s,"converted-images.zip")}s([]),l([]),o(0)}},[a,x]);return(0,r.useEffect)(()=>()=>{e.forEach(e=>URL.revokeObjectURL(URL.createObjectURL(e)))},[e]),(0,r.useEffect)(()=>{let e=document.getElementById("drop-zone");if(!e)return;let a=s=>{s.preventDefault(),e.classList.toggle("drag-over","dragover"===s.type)},t=e=>{var a;e.preventDefault();let t=null===(a=e.dataTransfer)||void 0===a?void 0:a.files;t&&0!==t.length&&s(e=>[...e,...Array.from(t)])};return e.addEventListener("dragover",a),e.addEventListener("dragleave",a),e.addEventListener("drop",t),()=>{e.removeEventListener("dragover",a),e.removeEventListener("dragleave",a),e.removeEventListener("drop",t)}},[]),(0,t.jsxs)("div",{className:"tool-container",children:[(0,t.jsxs)("div",{className:"tool-header",children:[(0,t.jsx)("h1",{children:"Convert to WebP"}),(0,t.jsx)("p",{className:"heading-desc",children:"Drag and drop your images below to convert them to WebP format"})]}),(0,t.jsxs)("div",{className:"main-container-div",id:"drop-zone",children:[(0,t.jsxs)("div",{className:"middle-container",children:[(0,t.jsxs)("div",{className:"upload-section",children:[(0,t.jsx)("input",{type:"file",id:"file-input",multiple:!0,onChange:u,hidden:!0}),(0,t.jsxs)("div",{className:"upload-content",onClick:()=>{var e;return null===(e=document.getElementById("file-input"))||void 0===e?void 0:e.click()},children:[(0,t.jsx)("img",{src:"/img/upload.svg",alt:"Upload",className:"upload-icon"}),(0,t.jsx)("h3",{children:"Drag & Drop Images"}),(0,t.jsx)("p",{children:"or click to browse files"}),(0,t.jsx)("p",{className:"support-text",children:"Supports: PNG, WEBP, GIF, JPEG"})]})]}),e.length>0&&(0,t.jsxs)("div",{className:"image-preview-main",children:[(0,t.jsxs)("div",{className:"image-preview-sub",children:[(0,t.jsx)("h3",{children:"Uploaded Images"}),(0,t.jsxs)("div",{className:"file-counter",children:[e.length," files uploaded | ",v(e.reduce((e,s)=>e+s.size,0))]})]}),(0,t.jsx)("div",{className:"image-preview-grid",children:e.map((e,s)=>(0,t.jsxs)("div",{className:"preview-item",children:[(0,t.jsx)("span",{className:"filesize-img",children:v(e.size)}),(0,t.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"preview-image"}),(0,t.jsx)("button",{className:"delete-btn",onClick:()=>b(s),children:(0,t.jsx)("img",{src:"/img/delete-btn.svg",alt:"Delete"})})]},s))})]})]}),(0,t.jsxs)("div",{className:"right-options-container",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"right-options-heading",children:"Progress"}),(0,t.jsxs)("div",{className:"progress-container",children:[(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:"progress",style:{width:"".concat(c,"%")}})}),(0,t.jsxs)("div",{className:"progress-text",id:"progress-text",children:[c,"% Completed"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"right-options-heading",children:"Actions"}),(0,t.jsxs)("div",{className:"action-bar",children:[g?(0,t.jsx)("button",{className:"btn-4",onClick:f,children:"Download"}):(0,t.jsx)("button",{className:"btn-4",onClick:j,disabled:d||0===e.length,children:d?"Processing...":"Convert to WebP"}),g&&(0,t.jsx)("button",{className:"btn-2",onClick:()=>{s([]),l([]),o(0),h(!1)},children:"Reset"})]})]})]})]})]})}},3989:(e,s,a)=>{Promise.resolve().then(a.bind(a,785))}},e=>{var s=s=>e(e.s=s);e.O(0,[158,441,684,358],()=>s(3989)),_N_E=e.O()}]);